# TChart

## TODO

### high

- [x] оси
  - [x] красивые числа по Y
  - [x] начало отсчёта
  - [x] локализация формата даты
    - используем "MMM dd", порядок дня/месяца берём из android.text.format.DateFormat.getDateFormatOrder
  - [x] текcт X по центру точки
- [x] вид (~~диалог?~~ попап) со значениями сигналов на курсоре
- [x] список сигналов
- [x] вкл/выкл сигнала на графике
- [ ] анимация
  - [ ] изменения масштаба по X, Y
  - [ ] вкл/выкл сигнала
  - [ ] вкл/выкл курсора
- [ ] ускорение при перемещении или изменении размеров "зоны выделения" (как при скроллинге)
- [x] смена темы light/dark
- [x] размеры, отступы и т.п. в формате dp (не px)
- [x] отрисовка пустого графика (все сигналы выключены)
- [ ] разделитель между именами сигналов
- [x] более точное выставление курсора (выбирать точку сигнала, ближайщую к точке касания)
- [x] release build
  - [x] singing keys
  - [x] remove tinydancer
    - в release conf он автовыпиливается (используется tinydancer-noop)

### bugs

- [x] при повороте экрана все имена линий становятся "#3" (имя последней линии последнего графика)
  - https://stackoverflow.com/questions/2512010/android-checkbox-restoring-state-after-screen-rotation
- [ ] в последнем значении в cursorPopup срабатывает перенос слов
  - hack - можно сделать в разметке cursor_popup 2 ряда LinearLayout - cursor_values_1 и cursor_values_2
- [ ] стабильные даты по X при изменении масштаба
- [ ] картинка mode_icon в разных размерах, или svg (material.io)

### low

- [ ] k/kk при выводе значений больше 1000/1000000 по Y?
- [ ] зоны TOUCH_SLOP
  - увеличить зону TOUCH_SLOP2, когда граница находится у краёв экрана
  - левая "наезжает" на правую
  - левая "наезжает" на центр
- [x] какой yMin использовать на графике?
  - сейчас ~~всегда 0~~ ~~минимум в диапазоне~~ всегда 0 - так на ref
- [x] немного добавлять к yMax? (часть размаха)
  - добавляем часть размаха
- [x] размер checkbox в списке имён сигналов
  - https://stackoverflow.com/questions/2151241/android-how-to-change-checkbox-size
  - won't fix. оставляем стандартный checkbox
- [x] увеличить отступ между checkbox и его текстом
  - https://stackoverflow.com/questions/4037795/android-spacing-between-checkbox-and-text
- [x] первым делом проверять на попадание в зону MoveMode.LEFT_AND_RIGHT
- [ ] performClick? ripple при тапе?
- [ ] rtl языки
- [x] не блокировать скроллинг у родителя (requestDisallowInterceptTouchEvent), если начальное перемещение было по вертикали
- [x] использовать ListView для вывода нескольких графиков
  - при переиспользовании вида нужно восстанавливать выделенную область, курсоры и т.п. - won't fix.
- [x] задавать элементы (и их атрибуты) TelegramChart через разметку (<merge...>)
- [ ] атрибуты TelegramChart через разметку:
  - название графика
  - размеры графика (его элементов)
  - отступы
  - цвета (фона, линий осей, надписей осей, линии курсора (=линий осей?))
  - начальное положение для PreviewChart
  - количество линий оцифровки по X и по Y
  - толщина линий (сигналов на основном и превью, оцифровки, курсора)
- [ ] асинхронная загрузка данных из chart_data.json
- [ ] MVC? чтобы "выживать" при смене ориентации экрана
- [ ] комментарии на eng
- [x] внести xMin/yMin в xToPixel/yToPixel (проверить pixelToX)
